- hosts:
    - all
  remote_user: opc
  become: yes
  roles:
    - rhel_common
  
- hosts:
    - tag_name=pyrokar
  remote_user: opc
  become: yes
  roles:
    - haproxy
  vars:
    haproxy_conf: pyrokar_haproxy.cfg

- hosts:
    - tag_name=serpentes
  remote_user: opc
  become: yes
  roles:
    - lvm
    - fstab
    - docker
  vars:
    compose_file: serpentes.yaml
    vgs:
      - vg: storage
        pvs:
          - /dev/sdb
    lvs:
      - lv: wikijs
        vg: storage
        size: 10g
        fstype: ext4

    fstab_mounts:
      - target: /var/lib/wikijs
        device: /dev/storage/wikijs
    wikijs_postgres_password: !vault |
                                        $ANSIBLE_VAULT;1.1;AES256
                                        30376265383264366664333936333633343837626439386365393331303239616138356662616435
                                        3238393931343936636365376362613930343235656233310a633431643430313866383631393635
                                        31336563366137613366393162306537353331353561343531363631663839323837383261613264
                                        6264346263663732330a363535643461353738333865623138653463366632353331656566656239
                                        37393966363863623231663062633530343664366331656662333839636231363461306162336139
                                        39313638613634616530626564616630643930663264373537326464343231303161656239633132
                                        393064346138343837653462383538366136

